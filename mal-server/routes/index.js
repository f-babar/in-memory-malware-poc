var express = require('express');
var router = express.Router();

/* GET home page. */
router.get('/encryption', function(req, res, next) {
  let key = randomKey();
  res.json({ status: 1, message: 'success', key: key });
});

router.post('/encryption', function(req, res, next) {
  console.log(req.body);
  res.json({ status: 1, message: 'success', data: req.body});
});

function randomKey() {
	let chars = "01234567:,.89ABCDEFGHI#!$JKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz@%^&*";
	let string_length = 20;
	let randomstring = '';
	for (let i=0; i<string_length; i++) {
		let rnum = Math.floor(Math.random() * chars.length);
		randomstring += chars.substring(rnum,rnum+1);
	}
	return randomstring;
}

module.exports = router;
